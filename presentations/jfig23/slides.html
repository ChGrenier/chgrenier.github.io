<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>JFig 2023</title>

		<link rel="stylesheet" href="../revealjs/dist/reset.css">
		<link rel="stylesheet" href="../revealjs/dist/reveal.css">
		<link rel="stylesheet" href="../revealjs/dist/theme/serif.css">

		<!-- Theme used for syntax highlighted code -->
		<link rel="stylesheet" href="../revealjs/plugin/highlight/monokai.css">
	</head>
	<body>
		<div class="reveal">
			<div class="slides">


                <!-- diapo de titre -->
                <section data-state="hide-menubar hide-menu">
                    <h2>Real-time terrain enhancement with controlled procedural patterns</h2>
                    <h4><b>C. Grenier</b><sup>1</sup>, 
                           É. Guérin<sup>2</sup>, 
                           É. Galin<sup>2</sup>, 
                           B. Sauvage<sup>1</sup></h4>
                    <h4><sup>1</sup>Université de Strasbourg, <sup>2</sup>INSA Lyon</h4>
                    <!-- <p>Université de Strasbourg, INSA Lyon</p> -->
                    <!-- <img src="images/logo_icube.png" height="90">
                    <img src="images/logo_unistra.png"  height="90">
                    <img src="images/logo_cnrs.png" height="90"> -->

                    <aside class="notes">
                        Bonjour,
                        Je suis Charline Grenier, je suis en thèse au laboratoire ICube à Strasbourg.
                        je vais vous présenter notre travail sur de l'augmentation de terrain par des motif procéduraux contrôlé.
                        Ce travail est le fruit d'une collaboration entre les laboratoire de strasbourg et de lyon suite à une mobilité inter-labo financée par le GdR IGRV
                    </aside>
                </section>


                <!-- Intro -->
                <section>
                    <h2>Introduction</h2>
                    <figure class="r-stretch" Align="center">
                        <img src="images/flight_simulator.jpeg">
                        <figcaption>Figure 1 : Microsoft fligt simulator</figcaption>
                    </figure>

                    <aside class="notes">
                        les terrains jouent un rôle important dans le réalisme des monde virtuel.
                        c'est en particulier visible dans les simulations, les films ou les jeux vidéo.
                        dans ces terrain, ce sont aussi bien les grand structure que les petit détails qui font le réalisme
                    </aside>
                </section>




                <!-- Table des matières -->
                <section>
                    <h2>Plan de la présentation</h2>
                    <ol class="menu"></ol> <!--Keep empty-->

                    <aside class="notes">
                        pour cette présenation je vais dans un premeir temps vous faire un bref état de l'art sur l'augmentation de terrain
                        puis je présenterais notre méthode,
                        et des comparaison avec des méthodes existante
                    </aside>
                </section>








                <!-- section 1 -->
				<section data-name="État de l'art">
                    <!-- <section>
                        <h2>Etat de l'art</h2>
                        <ol>
                            <li>Simulations d'érosion</li>
                            <li>Méthodes basées exemple</li>
                            <li>Méthodes procédurales</li>
                        </ol>

                        <aside class="notes">
                            il existe de nombreuse façon de représenter un terrain. 
                            dans cette présentation nous nous contenterons de la représentation par champ de hauteur.
                            et je vais plutôt vous présenter ici des méthodes d'augmentation de ces champ de hauteur
                            c'est à dire peremttant d'ajouter des détails à un terrain existant.
                        </aside>
                    </section> -->






                    <section data-name="Augmentation de terrain">
                        <h2>État de l'art - Augmentation de terrain</h2>
                        
                        <table width="60%" Align="left" cellspacing="0" cellpadding="0">
                            <!-- <tr> -->
                                <td>
                                    <figure Align="center">
                                        <img src="images/spf23.png">
                                        <figcaption>Figure 2 : terrain obtenu par simulation d'érosion, [SPF+23]</figcaption>
                                    </figure>
                                    
                                    <!-- <small align="center"> Figure : géométrie et texture d'une scène</small> -->
                                </td>
                            <!-- </tr> -->
                        </table>

                        <div>
                            <br>
                            <p>Simulations d'érosion</p>
                            <br>
                            <ul>
                                <li>Processus itératif global</li>
                                <li>Résultat naturel</li>
                                <li>Coûteux en calcul</li>
                            </ul>
                        </div>

                        <aside class="notes">
                            une méthode très utilisée est la simulation de phénomène physique, tel que l'érosion hydrolique.
                            cette famille de méthode permet de résultat très naturel.
                            mais c'est un processus itératif qui s'applique de façon global sur le terrain : pas de parallélisation, plusieurs passage nécessaire
                        </aside>
                    </section>





                    <section data-name="Augmentation de terrain">
                        <h2>État de l'art - Augmentation de terrain</h2>
                        
                        <table width="60%" Align="left" cellspacing="0" cellpadding="0">
                            <!-- <tr> -->
                                <td>
                                    <figure Align="center">
                                        <img src="images/gdgp16.png">
                                        <figcaption>Figure 3 : augmentation de terrain par sparse modeling, [GDGP16]</figcaption>
                                    </figure>
                                    
                                    <!-- <small align="center"> Figure : géométrie et texture d'une scène</small> -->
                                </td>
                            <!-- </tr> -->
                        </table>

                        <div>
                            <br>
                            <p>Data driven</p>
                            <br>
                            <ul>
                                <li>Résultat naturel</li>
                                <li>Coûteux en calcul</li>
                                <li>Coûteux en mémoire</li>
                            </ul>
                        </div>

                        <aside class="notes">
                            viennent ensuite les méthodes utilisant des exemples de motifs pré-calculé et combinés ensemble
                            il s'agit ici amplifier un terrain d'entrée basse résolution en utilisant des patchs haute résolution stokés dans un dictionnaire
                            résultat naturel mais coûteux en calcul et en mémoire.
                        </aside>
                    </section>



                    <section data-name="Augmentation de terrain">
                        <h2>État de l'art - Augmentation de terrain</h2>
                        
                        <table width="60%" Align="left" cellspacing="0" cellpadding="0">
                            <!-- <tr> -->
                                <td>
                                    <figure Align="center">
                                        <img src="images/dcb09.png">
                                        <figcaption>Figure 4 : augmentation de terrain par ridged noise (gauche) et erosive noise (droite), [DCB09]</figcaption>
                                    </figure>
                                    
                                    <!-- <small align="center"> Figure : géométrie et texture d'une scène</small> -->
                                </td>
                            <!-- </tr> -->
                        </table>

                        <div>
                            <br>
                            <p>Procédural</p>
                            <br>
                            <ul>
                                <li>Processus local</li>
                                <li>Calcul en parallèle</li>
                                <li>Résultat peu naturel</li>
                            </ul>
                        </div>

                        <aside class="notes">
                            enfin, les méthode procédural, utilisent des bruit procéduraux pour ajouter des détails.
                            contrairement au deux famille de méthode précédentees, ces détails sont calculé localement en parallèle
                            sur l'image nous avons, à gauche, le ridge noise qui génère des arrête vive mais complètement déconectées du terrain et ne permettant pas l'écoulement de l'eau
                            à droite, l'érosive noise, propose un étirement de motifs suivant le gradient du terrain, mais le résultat manque de réalisme
                        </aside>
                    </section>







                    <section data-name="Augmentation de terrain">
                        <h2>Contributions</h2>
                        
                        <table width="60%" Align="left" cellspacing="0" cellpadding="0">
                            <!-- <tr> -->
                                <td>
                                    <figure Align="center">
                                        <img src="images/pipeline.png">
                                        <figcaption>Figure 5 : pipeline de notre méthode</figcaption>
                                    </figure>
                                    
                                    <!-- <small align="center"> Figure : géométrie et texture d'une scène</small> -->
                                </td>
                            <!-- </tr> -->
                        </table>

                        <div>
                            <br>
                            <p>Objectifs</p>
                            <br>
                            <ul>
                                <li>Processus local</li>
                                <li>Détails adaptés au terrain</li>
                                <li>Résultat plus naturel</li>
                            </ul>
                        </div>

                        <aside class="notes">
                            notre objectif est donc de présenter une méthode pocédurale, dont le résutat est calculé localement en parallèle mais avec un meilleur réalisme, 
                            Pour cela, nous visons une meilleur utilisation du gradient pour contrôler l'orientation les détail et permettre l'écoulement de l'eau
                        </aside>
                    </section>



                    


				</section>

















                <!-- section 2 -->
                <section  data-name="Méthode">
                    <!-- <section>
                        <h2>Méthode</h2>
                        <ol>
                            <li>Modèle général</li>
                            <ol>
                                <li>Définition de l'apparence</li>
                                <li>Contrôle des détails</li>
                            </ol>
                            <li>Améliorations</li>
                            <ol>
                                <li>Mise en cascade</li>
                                <li>Traitement des crêtes</li>
                            </ol>
                        </ol>
                    </section> -->



                    <section data-name="Phasor">
                        <h2>Méthode - Phasor noise et reformulation</h2>


                        <table width="50%" Align="left" cellspacing="0" cellpadding="0">
                            <!-- <tr> -->
                                <td Align="center">
                                    <figure Align="center">
                                        <img src="images/teaser_phasor.png">
                                        <figcaption>Figure 6 : procedural Phasor noise, [TEZ+19]</figcaption>
                                    </figure>

                                    <table >
                                        <td width="30%">
                                            <figure>
                                                <img src="images/bi_chan_re_crop.png">
                                                <figcaption>(a) : champ $G_{f,\theta}(\mathbf{u})$</figcaption>
                                            </figure>
                                        </td>

                                        <td width="30%">
                                            <figure>
                                                <img src="images/cm_triangle_simple.png" >
                                                <figcaption>(b) : fonction $H(\mathbf{x})$</figcaption>
                                            </figure>
                                        </td>

                                        <td width="30%">
                                            <figure>
                                                <img src="images/res_triangle_simple.png">
                                                <figcaption>(c) : Phasor$(\mathbf{u})$</figcaption>
                                            </figure>
                                        </td>

                                        <caption>Figure 7 : reformulation par fonction de transfert 2D, [GSDT22]</caption>
                                    </table>
                                </td>
                        </table>

                        <div>
                            <br><br>
                            <p>$$ Phasor(\mathbf{u}) = H \circ G_{f,\theta}(\mathbf{u}) $$</p>
                            <p>$$ H(\mathbf{x}) = p \circ atan2(\mathbf{x}) $$</p>
                        </div>


                        <!-- <table class="r-stretch" cellspacing="0" cellpadding="100%">


                                <td>
                                    <div >
                                        <p>$$ Phasor(\mathbf{u}) = p \circ \phi(\mathbf{u}) $$</p>
                                        <p>$$ \phi(\mathbf{u}) = atan2 \circ G_{f,\theta}(\mathbf{u}) $$</p>
                                    </div>

                                    <figure Align="center">
                                        <img src="images/teaser_phasor.png">
                                        <figcaption>Figure 6 : procedural Phasor noise, [TEZ+19]</figcaption>
                                    </figure>
                                </td>


                                <td>
                                    <div>
                                        <p>$$ Phasor(\mathbf{u}) = H \circ G_{f,\theta}(\mathbf{u}) $$</p>
                                        <p>$$ H(\mathbf{x}) = p \circ atan2(\mathbf{x}) $$</p>
                                    </div>

                                    <table >
                                        <td width="30%">
                                            <figure>
                                                <img src="images/bi_chan_re_crop.png">
                                                <figcaption>(a) : champ $G_{f,\theta}(\mathbf{u})$</figcaption>
                                            </figure>
                                        </td>

                                        <td width="30%">
                                            <figure>
                                                <img src="images/cm_triangle_simple.png" >
                                                <figcaption>(b) : fonction $H(\mathbf{x})$</figcaption>
                                            </figure>
                                        </td>

                                        <td width="30%">
                                            <figure>
                                                <img src="images/res_triangle_simple.png">
                                                <figcaption>(c) : Phasor$(\mathbf{u})$</figcaption>
                                            </figure>
                                        </td>

                                        <caption>Figure 7 : reformulation par fonction de transfert 2D, [GSDT22]</caption>
                                    </table>

                                </td>
                        </table> -->

                        <aside class="notes">
                            en génération de texture, le phasor noise, permet d'obtenir des vagues alongée dont on peut controller le profil
                            <!-- la formualtion initiale présentée en 2019 consiste à composer un champ de phase phi, par un profil de vague p -->
                            en 2022 une reprise de la formulation a été proposée 
                            en composant un champ gaussien complexe (en bas à gauche) par une fonction de transfert (en bas au centre)
                            Cette fonction de transfert contient le profil p des vagues et le calcul de la phase du champ complexe.
                            
                            cette formulation nous permet de manipuler plus facilement le profil et le champ G indépendement 
                            <!-- ce qui va nous être utilie pour la définition de l'apparence des raviens -->
                        </aside>
                    </section>






                    <!-- sous section 1 -->
                    <!-- <section data-name="Pipeline">
                        <h2>Pipeline</h2>


                        <table width="60%" Align="left" cellspacing="0" cellpadding="0">
                                <td>
                                    <figure Align="center">
                                        <img src="images/pipeline.png" >
                                        <figcaption>Figure 8 : pipeline de notre méthode</figcaption>
                                    </figure>
                                    
                                </td>
                        </table>

                        <div >
                            <br><br>
                            <p>$$T(\mathbf{u}) = h(\mathbf{u}) + r(\mathbf{u})$$</p>
                            <p>$$r(\mathbf{u}) = a(\mathbf{u}) H \circ G_{f(\mathbf{u}),\theta(\mathbf{u})}(\mathbf{u})$$</p>
                            
                        </div>

                        

                        <aside class="notes">
                            pipeline simple : addition du champ de hauteur du terrain initial avec les détails générés procéduralement
                            ces détails dépendent d'information du terrain initail mais aussi de carte qui peuvent être définie par l'utilisateur
                            ravine : amplitude fois fonction H appliqué à un champ gaussien G contrôlé en fréquence et en orientation
                        </aside>
                    </section> -->






                    




                    <section data-name="Profil">
                        <h2>Méthode - Profil</h2>
                        

                        <table width="27%" Align="left" cellspacing="0" cellpadding="0">
                            <!-- <tr> -->
                                <td Align="center">
                                    <figure>
                                        <!-- <img src="images/function_rho.png" width="80%"> -->
                                        <img src="images/function_p.png" width="80%">
                                        <figcaption>Figure 8 : profil $p$ </figcaption>
                                    </figure>
                                    <figure>
                                        <img src="images/function_rho_1.png" width="80%">
                                        <!-- <img src="images/function_p.png" width="80%"> -->
                                        <figcaption>Figure 9 : atténuation $\rho$ </figcaption>
                                    </figure>
                                </td>
                        </table>

                        <table width="27%" Align="left" cellspacing="0" cellpadding="0">
                            <!-- <tr> -->
                                <td Align="center">
                                    <figure>
                                        <img src="images/cm_p_coord.png" width="100%">
                                        <figcaption>Figure 10 : fonction $H$ </figcaption>
                                    </figure>
                                </td>
                        </table>

                        <table width="46%" Align="left" cellspacing="0" cellpadding="0">
                            <!-- <tr> -->
                                <td Align="center">
                                    <figure>
                                        <img src="images/res_p.png" width="100%">
                                        <figcaption>Figure 11 : résultat 3D </figcaption>
                                    </figure>
                                </td>
                        </table>

                        <aside class="notes">
                            dans un premier temps nous définissons le contenue de la fonction de transfert H
                            pour représenter des ravines d'écoulement d'eau, nous avons choisi un profil transversal triangulaire avec un fond arrondi (représenté en bleu à gauche)
                            dans la carte H, ce profil se retrouve sur la coordonnée angulaire phi
                            sur la représentation en 3D, nous pouvons voir le fond des ravine entouré en pointillé.

                            Une difficulté présentée par le phasor noise est la présence d'une singularité au centre de H due à l'arctangente et qui provoque les pic entouré en ligne continue sur al vue 3D
                            
                        </aside>
                    </section>





                    <section data-name="Profil">
                        <h2>Méthode - Profil</h2>


                        <table width="27%" Align="left" cellspacing="0" cellpadding="0">
                            <td Align="center">
                                <figure>
                                    <img src="images/function_p.png" width="80%">
                                    <figcaption>Figure 12 : profil $p$ </figcaption>
                                </figure>
                                <figure>
                                    <img src="images/function_rho.png" width="80%">
                                    <figcaption>Figure 13 : atténuation $\rho$ </figcaption>
                                </figure>
                            </td>
                        </table>

                        <table width="27%" Align="left" cellspacing="0" cellpadding="0">
                                <td Align="center">
                                    <figure>
                                        <img src="images/cm_rho_p_coord.png" width="100%">
                                        <figcaption>Figure 14 : fonction $H$ </figcaption>
                                    </figure>
                                </td>
                        </table>

                        <table width="46%" Align="left" cellspacing="0" cellpadding="0">
                                <td Align="center">
                                    <figure>
                                        <img src="images/res_rho_p.png" width="100%">
                                        <figcaption>Figure 15 : résultat 3D </figcaption>
                                    </figure>
                                </td>
                        </table>


                        <aside class="notes">
                            ces pic aux intersection entre les ravines sont peu naturel.
                            pour les écrasé, nous introduisons une fonction d'atténuation, représentée en orange à gauche
                            cette atténuation se retrouve sur la coordonnée radiale de la fonction H
                            elle permet d'écraser la singularité au centre tout en conservant le reste du profil transversal comme nous pouvons le voir sur la vue 3D
                            nous obtenons ainsi la fonction H complète
                        </aside>
                    </section>




                    <section data-name="Contrôle">
                        <h2>Cartes de contrôle - orientation</h2>

                        <table class="r-stretch" Align="center" cellspacing="0" cellpadding="0">
                            <td Align="center">
                                <figure>
                                    <img src="images/terrain_lisse.png" width="91%">
                                    <figcaption>Figure 16 : terrain initial</figcaption>
                                </figure>
                            </td>

                            <td Align="center">
                                <figure>
                                    <img src="images/grad_terrain_lisse.png" width="90%">
                                    <figcaption>Figure 17 : gradient $\nabla h(\mathbf{u})$</figcaption>
                                </figure>
                            </td>

                            <td Align="center">
                                <figure>
                                    <img src="images/champ_orientation_terrain.png" width="75%">
                                    <img src="images/colormap_test.png" width="11.7%">
                                    <figcaption>Figure 18 : champ d'orientation $\theta(\mathbf{u})$</figcaption>
                                </figure>
                            </td>
                        </table>

                        <div>
                            $$\theta(\mathbf{u}) = atan2(\nabla h(\mathbf{u})) + \pi/2$$
                        </div>
                    
                        <!-- <figure>
                            <img src="images/terrain_lisse.png" width="20%">
                            <img src="images/grad_terrain_lisse.png" width="20%">
                            <img src="images/champ_orientation_terrain.png" width="20%">
                            <img src="images/colormap_test.png" width="3%">
                            <figcaption>Figure . : fbm, DCB09</figcaption>
                        </figure> -->
<!-- 
                        <p>
                            orientation, en fonction de la dérivée du terrain
                            image manuscrit champ d'orientation
                        </p> -->

                        <aside class="notes">
                            Pour le contrôle local des ravines, celui-ci se fait à travers le contrôle du champ G
                            dans un premier temps il est important de contrôler l'orientation et donc le sens des ravines.

                            dans notre cas, les ravines doivent être perpendicualire à la pente pour permettre l'écouement de l'eau
                            pour cela, en partant du terrain inital (à gauche), 
                            nous utilisons l'orientation du gradient (au centre), calculé sur le terrain stocké en mémoire (par exemple par différence finie)
                            pour obtenir le champ d'orientation (à droite)
                        </aside>
                    </section>







                    <!-- <section data-name="Contrôle">
                        <h2>Cartes de contrôles - fréquence</h2>

                        <br>
                        <figure class="r-stretch" Align="center">
                            <img src="images/controle_frequence.png">
                            <figcaption>Figure 20 : différents choix de fréquence pour un même terrain initial </figcaption>
                        </figure>

                        <div >
                            $$f(\mathbf{u}) = \alpha$$
                        </div>

                        <aside class="notes">
                            pour la fréquence, nos expérientation nous on mené à conclure qu'une fréquence constance donnait de bon résultat
                            la valeur de cette constante doit être en accor avec la fréquence élément déjà présent sur le terrain intial
                            la carte defréquence peut aussie être définit non constante et entièrment dessinée à la main par l'utilisateur
                        </aside>
                    </section> -->



                    <section data-name="Contrôle">
                        <h2>Cartes de contrôle - amplitude</h2>

                        <br>
                        <figure class="r-stretch">
                            <img src="images/custom_amplitude.png">
                            <figcaption>Figure 20 : définition de l'amplitude</figcaption>
                        </figure>

                        <!-- <table width="32%" Align="left" cellspacing="0em" cellpadding="0">
                            <td>
                                <figure >
                                    <img src="images/extract_amplitude_1.png" style="vertical-align:middle;margin:0px 0px">
                                    <img src="images/extract_amplitude_2.png">
                                    <figcaption>Figure 19 : amplitude automatique </figcaption>
                                </figure>
                            </td>
                        </table>
                        
                        <div Align="right">
                            <br>
                            <figure >
                                <img src="images/custom_amplitude.png" width="68%">
                                <figcaption>Figure 20 : modification manuelle de l'amplitude</figcaption>
                            </figure>
                        </div> -->




                        <!-- <p>
                            amplitude, plus forte là où l'eau ruisselle
                            image distance au rivière
                            image modification amplitude ?
                        </p> -->

                        <aside class="notes">
                            la carte d'amplitude permet de contrôler les zones où les ravines vont apparaitre ou non.
                            elle peut être définie entièrement à la main par l'utilisateur.
                            ici, pour l'image de gauche, nous avons utilisé la distance au rivière présentes dans le terrain initial comme carte d'amplitude
                            à droite, nous avons fait une modification manuelle de la carte précédente pour ajouter plus de ravines sur une des pentes
                        </aside>
                    </section>











                    <!-- sous section 2 -->
                    <section data-name="Objectif">
                        <h2>Résultat</h2>

                        <table width="60%" Align="left" cellspacing="0" cellpadding="0">
                            <!-- <tr> -->
                                <td>
                                    <figure Align="center">
                                        <img src="images/terrain_lvl1.png">
                                        <figcaption>Figure 21 : terrain initial et résultat de l'augmentation</figcaption>
                                    </figure>
                                    
                                    <!-- <small align="center"> Figure : géométrie et texture d'une scène</small> -->
                                </td>
                            <!-- </tr> -->
                        </table>

                        <div width="39%">
                            <br>
                            <p>Améliorations possibles</p>
                            <!-- <br> -->
                            <ul>
                                <li>Pentes lisses</li>
                                <li>Lignes de crête lisses</li>
                            </ul>
                            <figure Align="right">
                                <img src="images/lvl2.png">
                                <!-- <figcaption>Figure 23 : terrain initial et résultat de l'augmentation</figcaption> -->
                            </figure>
                        </div>

                        <aside class="notes">
                            avec le modèle dévelopé jusque là nous augmentons le terrain initial à gauche avec des ravines générée procédurelement et permettant un bon écoulemetn de l'eau
                            cependant, le résultat obtenu peut être améliorer pour augmenter le réalisme.
                            en effet, les pentes des ravines ainsi que le crête sont très lisse par rapport à des ravines naturelles.

                            Pour améliorer ce résultat, nous allons, dans un premier temps, appliquer le modèle précédent en cascade de façon a créer des rigoles sur les pentes des ravines
                            comme dans l'image à droite.
                            Ces rigoles ont une fréquence 3 fois plus élevée que les ravines et leur amplitude est définie selon la même carte de façon à ce qu'elles apparaissent aux mêmes endrois
                            la principale difficulté réside dans l'orientation des rigoles.

                        </aside>
                    </section>






                    <!-- <section data-name="Mise en cascade">
                        <h2>Mise en cascade</h2>

                        <table class="r-stretch" cellspacing="0" cellpadding="0">
                                <td Align="center" width="40%">
                                    <div>
                                        <br>
                                        <p>$$r^{(1)}(\mathbf{u}) = a^{(1)} H \circ G_{f^{(1)},\theta^{(1)}}(\mathbf{u})$$</p>
                                        <p>$$a^{(1)}(\mathbf{u}), f^{(1)}(\mathbf{u}), \theta^{(1)}(\mathbf{u})$$</p>
                                        <img src="images/lvl1.png" width="80%">
                                    </div>
                                </td>

                                <td Align="center" width="20%">
                                    <div>
                                        <br>
                                        <p>$$\rightarrow$$</p>
                                    </div>
                                </td>
                        
                                <td Align="center" width="40%">
                                    <div>
                                        <br>
                                        <p>$$r^{(2)}(\mathbf{u}) = a^{(2)} H \circ G_{f^{(2)},\theta^{(2)}}(\mathbf{u})$$</p>
                                        <p>$$a^{(2)}(\mathbf{u}), f^{(2)}(\mathbf{u}), \theta^{(2)}(\mathbf{u})$$</p>
                                        <img src="images/lvl2.png" width="80%">
                                    </div>
                                </td>
                                
                        </table>


                        <aside class="notes">
                            
                        </aside>
                    </section> -->


                    <section data-name="Mise en cascade">
                        <h2>Améliorations - Mise en cascade</h2>

                        <table class="r-stretch" Align="center">
                            <!-- <tr> -->
                                <td width="33%">
                                    <br>
                                    $$G_{f,\theta}(\mathbf{u}) = \sum_{\mathbf{c}} w(\mathbf{c}) k(\mathbf{u} - \mathbf{c})$$
                                    $$\mathbf{J}(\mathbf{u}) = \sum_{\mathbf{c}} w(\mathbf{c}) k'(\mathbf{u} - \mathbf{c})$$
                                    <br>
                                    $$\nabla r^{(1)}(\mathbf{u}) = \mathbf{J}(\mathbf{u}) ~ \nabla H \circ G_{f,\theta}(\mathbf{u})$$
                                    
                                </td>

                                <td width="12%">
                                    <br>
                                    <figure>
                                        <img src="images/grad_terrain_lisse.png">
                                        <figcaption>$\nabla h$</figcaption>
                                    </figure>
                                    <figure>
                                        <img src="images/grad_lvl1_ravine.png">
                                        <figcaption>$\nabla r^{(1)}$</figcaption>
                                    </figure>
                                </td>
                        
                                <td Align="center" width="32%">
                                    <br>
                                    <figure>
                                        <img src="images/champ_orientation_lvl2.png" width="75%">
                                        <img src="images/colormap_test.png" width="11%">
                                        <figcaption >Figure 22 : champ d'orientation $\theta^{(2)}$</figcaption>
                                    </figure>
                                    
                                </td>
                                
                        </table>

                        




                        <!-- <table class="r-stretch" cellspacing="0" cellpadding="0">
                            <td width="30%">
                                <table  Align="left" cellspacing="0" cellpadding="0">
                                    <td >
                                        <figure>
                                            <img src="images/terrain_lisse.png" width="45%">
                                            <img src="images/grad_terrain_lisse.png" width="45%">
                                            <figcaption>Figure 22 : terrain et gradient </figcaption>
                                        </figure>
                                        <figure>
                                            <img src="images/altitude_lvl1_ravine.png" width="45%">
                                            <img src="images/grad_lvl1_ravine.png" width="45%">
                                            <figcaption>Figure 23 : ravines et gradient </figcaption>
                                        </figure>
                                    </td>
                                </table>
                            </td>
                            <td >
                                <figure >
                                    <img src="images/grad_terrain_p_lvl1.png" width="90%" style="margin:40px 0px" >
                                    <figcaption style="margin:-42px 0px">Figure 24 : somme des gradients </figcaption>
                                </figure>
                            </td>
                            <td >
                                <figure>
                                    <img src="images/champ_orientation_lvl2.png" width="75%" style="margin:40px 0px">
                                    <img src="images/colormap_test.png" width="11%" style="margin:40px 0px">
                                    <figcaption style="margin:-42px 0px">Figure 25 : champ d'orientation </figcaption>
                                </figure>
                            </td>
                        </table>


                        <p class="r-stretch">
                            $$\theta^{(2)}(\mathbf{u}) = atan2(\nabla h(\mathbf{u}) + \nabla r^{(1)}(\mathbf{u})) + \pi/2$$
                        </p> -->


                        <aside class="notes">
                            l'orientation des rigole doit être faite en tenant compte du terrain initial et des ravines principale déjà ajoutées.
                            le champ d'orientation (à droite) dépend donc de la somme des gradient du terrain et des ravines.

                            le gradient du terrain à déjà été calculé pour orienté les ravines, par différence finie par exemple.
                            pour obtenir le gradient des ravines, nous devons dérivée la composition H rond G 
                            considérons le champ vectoriel G comme une somme pondérée de noyaux de gabor k
                            la matrice jacobienne J de ce champ est donc la somme des dérivée des noyaux.

                            De cette façon, nous obtenons la dérivation du phasor noise par le produit jacobienne fois gradient H évalué en G
                            la fonction H peut être dérivée par différence finie.
                            ce qui nous permet d'avoir le gradient de nos ravine à la volée.
                        </aside>
                    </section>




                    <!-- <section data-name="Mise en cascade">
                        <h2>Mise en cascade - fréquence et amplitude</h2>

                        <table width="75%" Align="left" cellspacing="0" cellpadding="0">
                                <td>
                                    <figure Align="center">
                                        <img src="images/terrain_lvl1_lvl2.png">
                                        <figcaption>Figure 28 : terrain initial, niveau 1 et niveau 2 d'amplification</figcaption>
                                    </figure>
                                    
                                </td>
                        </table>

                        <div>
                            <p>Fréquence</p>
                            <p>$$ f^{(2)} = \alpha f^{(1)} $$</p>
                            <hr>
                            <p>Amplitude</p>
                            <p>$$ a^{(2)} = \lambda a^{(1)} $$</p>
                        </div>



                        <aside class="notes">
                            
                        </aside>
                    </section> -->



                    





                    <section data-name="Lignes de crêtes">
                        <h2>Améliorations - Lignes de crêtes</h2>

                        <figure class="r-stretch">
                            <img src="images/terrain_lvl1_lvl2_fbm.png" width="100%">
                            <figcaption>Figure 23 : terrain initial, niveau 1, niveau 2 et ajout de bruit sur les crêtes</figcaption>
                        </figure>

                        <!-- <p>
                            ajout d'un fBm en haut des ravines principales
                        </p> -->


                        <aside class="notes">
                            Finalement, en partant d'un terrain initial (à gauche)
                            nous ajoutons un premier niveau de ravines
                            puis un second niveau de rigole en cascade à l'intérieur de ravine.
                            enfin, pour casser le côté lisse des ligne de crête, nous ajoutons un bruit de type fbm au sommet de ravines
                            pour obtenir le résultat à droite.
                        </aside>
                    </section>




                    

                    <!-- <section data-name="Résultats">
                        <h2>Résultats</h2>

                        <figure class="r-stretch">
                            <img src="images/webgl_init.png" width="49%">
                            <img src="images/webgl_res.png" width="49%">
                            <figcaption>Figure 30 : Terrain initial et résultat de l'augmentation.</figcaption>
                        </figure>



                        <aside class="notes">
                            controle facile, intuitif pour un artiste
                            soumission en cours de préparation, on voulais soumettre en avril mais ça a pris un peu de retard
                        </aside>
                    </section> -->

                </section>










                <!-- section 3 -->
                <section  data-name="Comparaisons">
                    <!-- <section>
                        <h2>Comparaisons et validations</h2>
                        <ol>
                            <li>Ré-augmentation de terrain</li>
                            <li>Comparaisons</li>
                            <li>Mesure d'écoulement</li>
                        </ol>
                    </section> -->






                    <section data-name="Formation">
                        <h2>Comparaisons - Ré-augmentation de terrain</h2>

                        <table class="r-stretch" Align="center" cellspacing="0" cellpadding="0">
                            <td width="30%">
                                <figure>
                                    <img src="images/terrain_reel_init.png">
                                    <figcaption>Figure 24 : terrain initial </figcaption>
                                </figure>
                            </td>
                            <td width="30%">
                                <figure>
                                    <img src="images/terrain_reel_smooth.png">
                                    <figcaption>Figure 25 : version lissée </figcaption>
                                </figure>
                            </td>
                            <td width="30%">
                                <figure>
                                    <img src="images/terrain_reel_nous.png">
                                    <figcaption>Figure 26 : notre résultat </figcaption>
                                </figure>
                            </td>

                        </table>
                        

                        <aside class="notes">
                            Pour valider nos résultat nous 
                            pour cela, nous considérons un terrain initial (à gauche) 
                            que nous avons lissé pour en retirer les détails haute fréquence (au centre)
                            la ré-augmentation de ce terrain par notre méthode (à droite) permet de retrouver des détails cohérent avec le terrain

                            Des différence sont évidemnent visible, comme celles entourée en bleu et en rouge (nous ne chercons pas à reproduire les détails à l'identique)
                            mais le résultat obtenue est dans le même esprit et assez proche du terrain initial
                        </aside>
                    </section>







                    <section data-name="Comparaison">
                        <h2>Comparaisons - Mesure d'écoulement</h2>

                        <table class="r-stretch" Align="center" cellspacing="0" cellpadding="0">
                            <td width="30%">
                                <figure>
                                    <img src="images/comparaison_reel_fbm.png">
                                    <figcaption>Figure 27 : bruit fbm </figcaption>
                                </figure>
                            </td>
                            <td width="30%">
                                <figure>
                                    <img src="images/comparaison_reel_nous.png">
                                    <figcaption>Figure 28 : notre méthode </figcaption>
                                </figure>
                            </td>
                            <td width="30%">
                                <figure>
                                    <img src="images/comparaison_reel_simu.png">
                                    <figcaption>Figure 29 : simulation d'érosion </figcaption>
                                </figure>
                            </td>

                        </table>

                        <figure Align="center">
                            <img src="images/comparaison_reel_init.png" width="20%">
                            <figcaption>Figure 30 : terrain initial</figcaption>
                        </figure>



                        <aside class="notes">
                            une validation un peu moins objective consiste à mesurer la quantité de matière à enlever pour permettre le bon écoulement de l'eau
                            à partir du terrain intial (en bas) nous réalisons 3 version détaillées
                            une par un fbm en ridge noise(à gauche) une par simulation d'érosion (à droite) et une avec notre méthode.
                            le résultat des mesure nous donne que la simulation est la méthode nécessitant le moins d'enlèvement de matière (2)
                            le bruit fbm est la méthode necessitant d'enlever le plus de matière (7.4)
                            pour notre méthode, la quantité de matière à enlever est une valeur intermédiaire plus proche de celle de la simulaiton que de celle du bruit fbm. (2.1)
                        </aside>
                    </section>








                    <!-- <section data-name="écoulement">
                        <h2>Mesure d'écoulement</h2>

                        <table class="r-stretch" Align="left" cellspacing="0" cellpadding="0">

                            <td Align="center">
                                <figure>
                                    <img src="images/comparison_flow_fbm.png" width="85%">
                                    <figcaption>Figure 37 : bruit fbm </figcaption>
                                </figure>
                                <figure>
                                    <img src="images/comparison_flow_simu.png" width="85%">
                                    <figcaption>Figure 38 : simulation d'érosion </figcaption>
                                </figure>
                            </td>


                            <td Align="center">
                                <figure>
                                    <img src="images/comparison_flow_nous.png" width="75%">
                                    <figcaption>Figure 39 : notre méthode </figcaption>
                                </figure>
                                <div class="r-stretch">
                                    <p>Quantité de matière retirée</p>
                                    <ul>
                                        <li>Simulation : 2</li>
                                        <li>Bruit fBm : 7.4</li>
                                        <li>Notre méthode : 2.1</li>
                                    </ul>
                                </div>
                            </td>

                        </table>


                        <aside class="notes">
                            notes
                        </aside>
                    </section> -->

                </section>










                <!-- section 4 -->
                <section  data-name="Conclusion">
                    <!-- <section> -->
                    <h2>Conclusion</h2>

                    <table width="60%" Align="left" cellspacing="0" cellpadding="0">
                        <!-- <tr> -->
                            <td>
                                <figure Align="center">
                                    <img src="images/terrain_res.png">
                                    <figcaption>Figure 31 : terrain initial et résultat final</figcaption>
                                </figure>
                                
                                <!-- <small align="center"> Figure : géométrie et texture d'une scène</small> -->
                            </td>
                        <!-- </tr> -->
                    </table>

                    <div>
                        <br>
                        <!-- <p>Résultat</p> -->
                        <ul>
                            <li>Processus local</li>
                            <li>Détails adaptés au terrain</li>
                            <li>Contrôle artistique</li>
                        </ul>
                        <hr>
                        <!-- <br> -->
                        <p>Limitations et suites</p>
                        <ul>
                            <li>Terrain comme un champ de hauteur</li>
                            <!-- <li>Type de terrains</li> -->
                            <li>Filtrage en temps réel</li>
                            <li>Potentiel des cartes de contrôle</li>
                        </ul>
                    </div>
                    <!-- </section> -->

                    <aside class="notes">
                        en conclusion, nous avons définit une méthode d'augmentation de terrain sous la forme d'un processus local
                        bien adapté au terrain grâce au contrôle par le gradient
                        et permettant également un contrôle artistique à travers les autre carte de contrôle tel que l'amplitude

                        plusieurs suites sont envisageable
                        une limitation intrinceque au modèle est la définition des terrain par un champ de hauteur, en effet cette représentation ne permet pas de couvrir tous le spectre de terrian possible
                        (pas de caverne ou de surplomb par exemple)

                        ensuite, nous nous sommes intéressé à la génération des détails en temps réel, 
                        il serait intéressant de travailler sur leur filtrage en temps réel.
                        dans le cadre des textures de couleur, le fitlrage du phasor est faisable en temps réel mais l'utilisation pour de la géométrie necessite de prendr en compt les effet de maskage et approte une difficulté supplémentaire

                        enfin, il serait intéressant de tester tous le potentiel des cartes de contrôle.
                        la carte de contrôle de la fréquence par exemple, est constante dans nos exemple mais peut être définie comme variable, à la main ou en fonction du terrain initial
                    </aside>
                </section>









                <!-- références -->
                <section data-state="hide-menubar hide-menu">
                    <h3>Références</h3>
                    <font size="6pt">
                        <ul class="r-stretch">
                            <li>[DCB09] De Carpentier G. J., Bidarra R. <b>Interactive gpu-based procedural heightfield brushe</b>. Proceedings of the 4th International Conference on Foundations of Digital Games (2009)</li>
                            <li>[GDGP16] Guérin E., Digne J., Galin E., Peytavie A. <b>Sparse representation of terrains for procedural modeling</b>. Computer Graphics Forum 35, 2 (2016).</li>
                            <li>[GSDT22] Grenier C., Sauvage B., Dischler J.-M., Thery S. <b>Color-mapped Noise Vector Fields for Generating Procedural Micro-patterns</b>. Computer Graphics Forum (2022).</li>
                            <li>[LLDD09] Lagae A., Lefebvre S., Drettakis G., and Dutré P. <b>Procedural noise using sparse gabor convolution</b>. ACM Transactions on Graphics (TOG), 2009.</li>
                            <li>[SPF+23] Schott H., Paris A., Fournier L., Guérin E., Galin E. <b>Large-scale terrain authoring through interactive erosion simulation</b>. ACM Transactions on Graphics 42 (2023).</li>
                            <li>[TEZ+19] Tricard T., Efremov S., Zanni C., Neyret F., Martinez J., Lefebvre S. <b>Procedural phasor noise</b>. ACM Transactions on Graphics 38, 4 (July 2019).</li>
                        </ul>
                    </font>
                </section>


                <!-- diapo de fin -->
                <section data-state="hide-menubar hide-menu">
                    <h1>Merci de votre attention</h1>

                    <br>
                    <table >
                        <td width="50%" Align=Center>
                            <div>
                                <p>Code de démonstration en WebGL :</p>
                                <a href="">terrainenhancement.github.io</a>
                            </div>

                            <figure>
                                <img src="images/qr_code_demo.png" width="40%">
                            </figure>
                        </td>


                        <td width="50%" Align=Center>
                            <div>
                                <p>Je suis à la recherche d'un PostDoc</p>
                                <a href="">chgrenier.github.io</a>
                            </div>

                            <figure>
                                <img src="images/qr_code_perso.png" width="40%">
                            </figure>
                        </td>
                </table>

                </section>


			</div>
		</div>







		<script src="../revealjs/dist/reveal.js"></script>
		<script src="../revealjs/plugin/notes/notes.js"></script>
		<script src="../revealjs/plugin/markdown/markdown.js"></script>
		<script src="../revealjs/plugin/highlight/highlight.js"></script>
        <script src="../revealjs/plugin/simplemenu/simplemenu.js"></script>
        <script src="../revealjs/plugin/math/math.js"></script>
		<script>
			// More info about initialization & config:
			// - https://revealjs.com/initialization/
			// - https://revealjs.com/config/
			Reveal.initialize({
				hash: true,
                transition:'none',
                slideNumber: 'c/t',
                margin: 0.12,
                // width: 900,
                // height: 800,
                width: '90%',
                mouseWheel: true,
                navigationMode:"linear",

                katex: {
                    version: 'latest',
                    delimiters: [
                    {left: '$$', right: '$$', display: true},
                    {left: '$', right: '$', display: false},
                    {left: '\\(', right: '\\)', display: false},
                    {left: '\\[', right: '\\]', display: true}
                ],
                ignoredTags: ['script', 'noscript', 'style', 'textarea', 'pre']
                },

                simplemenu: {
                        scale: 0.5,
                        barhtml: {
                            header: "<div class='menubar'>\
                                        <ul class='menu'></ul>\
                                        <div class='slide-number'>\
                                            </div>\
                                        </div>",
                            footer: "<div class='menubar'>\
                                            <p> <\p>\
                                            <p><b>Real-time terrain enhancement with controlled procedural patterns</b><\p>\
                                            <p><b>C. Grenier</b>, É. Guérin, É. Galin, B. Sauvage<\p>\
                                        </div>"
                        },
                    },

				// Learn about plugins: https://revealjs.com/plugins/
				plugins: [ RevealMarkdown, RevealHighlight, RevealNotes, Simplemenu, RevealMath.KaTeX ]
			});
            Reveal.slide( 0 );
            // Reveal.addEventListener( 'ready', function( event ) {
            //     Reveal.slide( 4, 6 );
            //     Reveal.toggleOverview(true);
            // });
            
		</script>
	</body>
</html>
